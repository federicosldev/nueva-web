<section class="p-6 max-w-[1600px] mx-auto">
    <div class="flex flex-col md:gap-8 lg:flex-row">
        <h2 class="text-5xl md:text-6xl lg:text-8xl text-[#EFA6F5] uppercase">
            Convierto tus <span class="text-[#6976DF]">ideas en realidad</span>
        </h2>

        <p
            class="text-xl md:text-lg lg:text-3xl w-full lg:w-[1000px] prose-invert"
        >
            Especializado en convertir tus ideas en realidades digitales. Desde
            el diseño web y el desarrollo de aplicaciones web hasta estrategias
            SEO, trabajaremos para materializar tu visión online con excelencia
            y creatividad.
        </p>
    </div>
    <article class="flex flex-col gap-7 mt-10 pb-20">
        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Desarrollo Web
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>
        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Diseño
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>
        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Marketing Digital
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>
        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Seo
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>
    </article>
    <div class="confetti-container"></div>
</section>
<script>
    import { gsap } from 'gsap';

    let lastConfettiTime = 0;
    const CONFETTI_COOLDOWN = 100; // Minimum time between confetti bursts in milliseconds

    function createConfetti(container, mouseX, mouseY) {
        const currentTime = Date.now();
        if (currentTime - lastConfettiTime < CONFETTI_COOLDOWN) return;
        lastConfettiTime = currentTime;

        const confettiCount = 2; // Reduced number of confetti elements
        const confettiImages = ['/triangulo.svg', '/favicon.svg'];

        for (let i = 0; i < confettiCount; i++) {
            const confetti = document.createElement('img');
            confetti.src =
                confettiImages[
                    Math.floor(Math.random() * confettiImages.length)
                ];
            confetti.style.position = 'absolute';
            confetti.style.left = `${mouseX}px`;
            confetti.style.top = `${mouseY}px`;
            confetti.style.width = '50px';
            confetti.style.height = '50px';
            confetti.style.pointerEvents = 'none';
            container.appendChild(confetti);

            gsap.fromTo(
                confetti,
                {
                    x: 0,
                    y: 0,
                    rotation: 0,
                    scale: 0,
                    opacity: 1,
                },
                {
                    x: (Math.random() - 0.5) * 100, // Reduced spread
                    y: -Math.random() * 100, // Reduced height
                    rotation: Math.random() * 360,
                    scale: Math.random() * 1 + 1,
                    opacity: 1,
                    duration: 1 + Math.random() * 0.3,
                    ease: 'power2.out',
                    onComplete: () => {
                        container.removeChild(confetti);
                    },
                },
            );
        }
    }

    function initConfetti() {
        const container = document.querySelector('.confetti-container');
        const serviceItems = document.querySelectorAll('.service-item');

        serviceItems.forEach(item => {
            let isHovering = false;

            item.addEventListener('mouseenter', () => {
                isHovering = true;
            });

            item.addEventListener('mouseleave', () => {
                isHovering = false;
            });

            item.addEventListener('mousemove', e => {
                if (!isHovering) return;

                const x = e.clientX;
                const y = e.clientY + window.scrollY;
                createConfetti(container, x, y);
            });
        });
    }

    document.addEventListener('astro:page-load', initConfetti);
    document.addEventListener('DOMContentLoaded', initConfetti);
</script>
