<section class="p-6 max-w-[1600px] mx-auto relative">
    <div
        class="service-image fixed top-0 left-0 w-[300px] h-[200px] pointer-events-none opacity-0 z-50"
    >
        <img
            src="/placeholder.svg"
            alt="Imagen del servicio"
            class="w-full h-full object-cover rounded-2xl"
        />
    </div>

    <div class="flex flex-col md:gap-8 lg:flex-row">
        <h2 class="text-5xl md:text-6xl lg:text-8xl text-[#EFA6F5] uppercase">
            Convierto tus <span class="text-[#6976DF]">ideas en realidad</span>
        </h2>

        <p
            class="text-xl md:text-lg lg:text-3xl w-full lg:w-[1550px] prose-invert"
        >
            Tienes una idea, y yo tengo las herramientas para convertirla en una
            realidad digital con impacto. A través de un diseño web estratégico,
            un desarrollo sólido y una estrategia digital bien pensada,
            transformo conceptos en proyectos funcionales y atractivos. No se
            trata solo de crear una web bonita, sino de construir una presencia
            online que genere resultados, atraiga clientes y haga crecer tu
            negocio.
        </p>
    </div>

    <article class="flex flex-col gap-7 mt-10 pb-20">
        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple hover:bg-primary-pink transition-colors duration-300 ease-in-out"
            data-image="/proyecto-clinica-veterinaria.webp"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Desarrollo Web
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>

        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple hover:bg-primary-pink transition-colors duration-300 ease-in-out"
            data-image="/proyecto-herbolario-de-maria.webp"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Diseño
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>

        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple hover:bg-primary-pink transition-colors duration-300 ease-in-out"
            data-image="/proyecto-shield-sure.webp"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Marketing Digital
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>

        <div
            class="service-item w-full flex flex-row md:flex-row justify-between items-center p-6 md:p-10 bg-purple-bg rounded-2xl md:rounded-full border border-primary-purple hover:bg-primary-pink transition-colors duration-300 ease-in-out"
            data-image="/proyecto-windows-2.webp"
        >
            <h3
                class="text-primary-purple text-4xl md:text-4xl lg:text-6xl pl-0 md:pl-5 text-center md:text-left"
            >
                Seo
            </h3>
            <div
                class="rounded-full z-10 border border-primary-purple p-4 md:p-5 hover:bg-primary-pink text-primary-pink mt-4 md:mt-0"
            >
                <a href="#">
                    <svg
                        width="35"
                        height="35"
                        viewBox="0 0 45 45"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="hover:rotate-45 text-primary-pink ease-linear duration-300"
                    >
                        <path
                            d="M44 1L0.999996 44"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                        <path
                            d="M44 39.7L44 1L5.3 0.999998"
                            stroke="#6976DF"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </a>
            </div>
        </div>
    </article>
</section>

<style>
    .service-image {
        will-change: transform;
        pointer-events: none;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        rotate: -5deg;
        width: 500px;
        height: 300px;
    }

    .service-item {
        cursor: pointer;
        position: relative;
    }
    @media (max-width: 768px) {
        .service-image {
            display: none !important;
        }
    }
</style>
<script>
    import { gsap } from 'gsap';

    function initServiceAnimation() {
        const isMobile =
            /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
                navigator.userAgent,
            );
        if (isMobile) {
            return;
        }
        const serviceImage = document.querySelector('.service-image');
        const serviceItems = document.querySelectorAll('.service-item');
        const img = serviceImage.querySelector('img');

        let currentX = 0;
        let currentY = 0;

        function updateImagePosition(e) {
            currentX = e.clientX + 20;
            currentY = e.clientY + 20;
            gsap.to(serviceImage, {
                x: currentX,
                y: currentY,
                duration: 0.3,
                ease: 'power2.out',
            });
        }

        const tl = gsap.timeline({ paused: true });

        tl.fromTo(
            serviceImage,
            {
                opacity: 0,
                scale: 0.8,
                rotation: -15,
            },
            {
                opacity: 1,
                scale: 1,
                rotation: -5,
                duration: 0.5,
                ease: 'back.out(1.7)',
            },
        );

        serviceItems.forEach(item => {
            item.addEventListener('mouseenter', e => {
                const imageUrl = item.dataset.image;
                img.src = imageUrl;
                updateImagePosition(e);
                tl.restart();
            });

            item.addEventListener('mousemove', updateImagePosition);

            item.addEventListener('mouseleave', () => {
                gsap.to(serviceImage, {
                    opacity: 0,
                    scale: 0.8,
                    rotation: -15,
                    duration: 0.3,
                    ease: 'power2.in',
                });
            });
        });
    }

    function setupAnimation() {
        // Limpiar eventos anteriores si existen
        const serviceItems = document.querySelectorAll('.service-item');
        serviceItems.forEach(item => {
            item.removeEventListener('mouseenter', null);
            item.removeEventListener('mousemove', null);
            item.removeEventListener('mouseleave', null);
        });
        initServiceAnimation();
    }

    document.addEventListener('DOMContentLoaded', setupAnimation);
    document.addEventListener('astro:page-load', setupAnimation);
</script>
